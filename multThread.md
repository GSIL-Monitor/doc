#### JAVA线程

* java线程实现方式
  * 实现runnable接口（无结果返回）
  * 实现callable接口 （可以通过Future获取返回执行结果）
  * 直接继承Thread类（为一个实现runnable接口类的实例） 
  
* Java 创建线程代价
  * 关于时间，创建线程使用是直接向系统申请资源的，这里调用系统函数进行分配资源的话耗时不好说。对操作系统来说,创建一个线程的代价是十分昂贵的, 需要给它分配内存、列入调度,同时在线程切换的时候还要执行内存换页,CPU 的缓存被 清空,切换回来的时候还要重新从内存中读取信息,破坏了数据的局部性
  * 关于资源,Java线程的线程栈所占用的内存是在Java堆外的，所以是不受java程序控制的，只受系统资源限制，默认一个线程的线程栈大小是1M（当让这个可以通过设置-Xss属性设置，但是要注意栈溢出问题），但是，如果每个用户请求都新建线程的话，1024个用户光线程就占用了1个G的内存，如果系统比较大的话，一下子系统资源就不够用了，最后程序就崩溃了。
    
* 线程池
  * 存在的意义
     * 降低使用线程代价，（节约系统创建线程， 销毁线程的时间）
     * a. 重用存在的线程，减少对象创建、消亡的开销，性能佳。 
     * b. 可有效控制最大并发线程数，提高系统资源的使用率，同时避免过多资源竞争，避免堵塞。 
     * c. 提供定时执行、定期执行、单线程、并发数控制等功能。
  * 线程池实现
    * 原理
      * 1、线程池管理器（ThreadPool）：用于创建并管理线程池，包括 创建线程池，销毁线程池，添加新任务；
      * 2、工作线程（PoolWorker）：线程池中线程，在没有任务时处于等待状态，可以循环的执行任务；
      * 3、任务接口（Task）：每个任务必须实现的接口，以供工作线程调度任务的执行，它主要规定了任务的入口，任务执行完后的收尾工作，任务的执行状态等；
      * 4、任务队列（taskQueue）：用于存放没有处理的任务。提供一种缓冲机制。  
    * 常用线程池：ExecutorService 是主要的实现类，其中常用的有 :
      Executors.newSingleThreadPool() 之创建一个线程执行任务

    　　newFixedThreadPool() 固定数目线程数

    　　newcachedTheadPool() 使用时才创建线程

   　　 newScheduledThreadPool()  

*   
   
